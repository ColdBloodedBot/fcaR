---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# fcaR: Tools for Formal Concept Analysis

<!-- badges: start -->
[![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![CRAN status](https://www.r-pkg.org/badges/version/fcaR)](https://cran.r-project.org/package=fcaR)
[![Build Status](https://travis-ci.com/neuroimaginador/fcaR.svg?token=MLhMMg8zTrQjhhSXhmgz&branch=master)](https://travis-ci.com/neuroimaginador/fcaR)
[![codecov](https://codecov.io/gh/neuroimaginador/fcaR/branch/master/graph/badge.svg?token=8ujvQdrzUI)](https://codecov.io/gh/neuroimaginador/fcaR)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/neuroimaginador/fcaR?branch=master&svg=true)](https://ci.appveyor.com/project/neuroimaginador/fcaR)
<!-- badges: end -->

The aim of this package is to provide tools to perform  fuzzy formal concept analysis (FCA) from within R.
It provides functions to load and save a Formal Context, extract its concept lattice and implications.
In addition, one can use the implications to compute semantic closures of fuzzy sets and, thus, build recommendation systems.

## Details

The fcaR package provides data structures which allow the user to work seamlessly with formal contexts and sets of implications. More explicitly, four main classes are implemented, using the \code{R6} object-oriented-programming paradigm in R:

- FormalContext encapsulates the definition of a formal context (G, M, I), being G the set of objects, M the set of attributes and I the (fuzzy) relationship matrix, and provides methods to operate on the context using FCA tools.
- ImplicationSet represents a set of implications over a specific formal context.
- SparseSet is a class solely used for visualization purposes, since it encapsulates in sparse format a (fuzzy) set.
- SparseConcept encapsulates internally both extent and intent of a formal concept as SparseSet.

Since fcaR is an extension of the data model in the arules package, most of the methods and classes implemented interoperates with the main S4 classes in arules (transactions and rules).

## Installation

The development version of this package can be installed with

```
remotes::install_github("neuroimaginador/fcaR", build_vignettes = TRUE)
```

## Example in Fuzzy Formal Context

<!-- Example from [here](https://www.sciencedirect.com/science/article/pii/S1877705812021418) -->


Let us start with a fuzzy dataset (stored in a matrix I) as follows:
```{r results="asis", echo = FALSE}

library(fcaR)

# Table 2 in the paper

objects <- paste0("O", 1:6)
n_objects <- length(objects)

attributes <- paste0("P", 1:6)
n_attributes <- length(attributes)

I <- matrix(data = c(0, 1, 0.5, 0, 0, 0.5,
                     1, 1, 0.5, 0, 0, 0,
                     0.5, 1, 0, 0, 1, 0,
                     0.5, 0, 0, 1, 0.5, 0,
                     1, 0, 0, 0.5, 0, 0,
                     0, 0, 1, 0, 0, 0),
            nrow = n_objects,
            byrow = FALSE)

colnames(I) <- attributes
rownames(I) <- objects

knitr::kable(I, format = "html", booktabs = TRUE)
```

Here, a value of x in the intersection of a row and a column indicates that the object of the corresponding row possesses the attribute in the column in a degree of at least x (if x = 0, the attribute is absent in the object, and if x = 1, the attribute is fully present in the object).

We can build a FormalContext object:

```{r}
fc <- FormalContext$new(I)

print(fc)
```

With a single function, we can compute the set of concepts:
```{r}
# Compute all concepts
fc$compute_concepts()

# The first concept
fc$concepts$get_concepts_by_id(1)[[1]]

# And plot the concept lattice
fc$concepts$plot()
```

We can also extract implications from the formal context:
```{r}
# Extract implications
fc$extract_implications_concepts()

# Which implications have been extracted
fc$implications
```

In this package, we have implemented a logic to manage implications. This so-called Simplification Logic allows us to simplify the extracted rules by removing redundancies.

```{r}
# Reduce the number of implications using two simple
# rules. The algorithm applies the specified rules
# in batches, if the number of rules is high.
fc$implications$apply_rules(rules = c("composition",
                                      "generalization"))

# Reduced set of implications
fc$implications

# We can obtain the support of both implications and concepts
fc$get_implication_support()
fc$concepts$compute_support()
```

All these functions work natively with fuzzy and with binary datasets.

## References
Guigues J, Duquenne V (1986). “Familles minimales d'implications informatives résultant d'un tableau de données binaires.” _Mathématiques et Sciences humaines_, *95*, 5-18.

Ganter B, Wille R (1999). _Formal concept analysis : mathematical foundations_. Springer. ISBN 3540627715.

Cordero P, Enciso M, Mora Á, Pérez de Guzman I (2002). “SLFD Logic: Elimination of Data Redundancy in Knowledge Representation.” _Advances in Artificial Intelligence -   IBERAMIA 2002_, *2527*, 141-150. doi:   10.1007/3-540-36131-6_15 (URL: http://doi.org/10.1007/3-540-36131-6_15).

Belohlavek R (2002). “Algorithms for fuzzy concept lattices.” In _Proc. Fourth Int. Conf. on Recent Advances in Soft Computing_. Nottingham, United Kingdom, 200-205.

Hahsler M, Grun B, Hornik K (2005). “arules - a computational environment for mining association rules and frequent item sets.” _J Stat Softw_, *14*, 1-25.

Mora A, Cordero P, Enciso M, Fortes I, Aguilera G (2012). “Closure via functional dependence simplification.” _International Journal of Computer Mathematics_, *89*(4), 510-526.

Belohlavek R, Cordero P, Enciso M, Mora Á, Vychodil V (2016). “Automated prover for attribute dependencies in data with grades.” _International Journal of Approximate Reasoning_, *70*, 51-67.
